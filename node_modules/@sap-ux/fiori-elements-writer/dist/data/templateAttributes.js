"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TemplateTypeAttributes = exports.getUi5Libs = exports.getBaseComponent = exports.escapeFLPText = exports.changesPreviewToVersion = exports.oldestSupportedUI5Version = void 0;
const types_1 = require("../types");
// first version with SAP Fiori 3 theme
exports.oldestSupportedUI5Version = '1.65.0';
exports.changesPreviewToVersion = '1.78.0';
// Specific escaping is required for FLP texts in flpSandbox.html template file
// Escapes '\' with '\\\\' and '"' with '\"' to correctly render inputs in a secure way
exports.escapeFLPText = (s) => s.replace(/\\/g, '\\\\').replace(/(")/g, '\\$&');
const appComponentLibGeneric = 'sap/suite/ui/generic/template/lib/AppComponent';
const appComponentLibOVP = 'sap/ovp/app/Component';
const appComponentLibFioriElements = 'sap/fe/core/AppComponent';
const commonUi5Libs = {
    [types_1.OdataVersion.v2]: [
        'sap.m',
        'sap.ushell',
        'sap.ui.core',
        'sap.f',
        'sap.ui.comp',
        'sap.ui.generic.app',
        'sap.suite.ui.generic.template'
    ],
    [types_1.OdataVersion.v4]: ['sap.m', 'sap.ushell', 'sap.fe.templates']
};
const templateLibs = {
    [types_1.OdataVersion.v2]: {
        [types_1.TemplateType.AnalyticalListPage]: {
            baseComponent: appComponentLibGeneric,
            ui5Libs: [...commonUi5Libs[types_1.OdataVersion.v2]]
        },
        [types_1.TemplateType.ListReportObjectPage]: {
            baseComponent: appComponentLibGeneric,
            ui5Libs: [...commonUi5Libs[types_1.OdataVersion.v2]]
        },
        [types_1.TemplateType.OverviewPage]: {
            baseComponent: appComponentLibOVP,
            ui5Libs: [...commonUi5Libs[types_1.OdataVersion.v2], 'sap.ovp', 'sap.ui.rta', 'sap.ui.layout']
        },
        [types_1.TemplateType.Worklist]: {
            baseComponent: appComponentLibGeneric,
            ui5Libs: [...commonUi5Libs[types_1.OdataVersion.v2], 'sap.collaboration']
        }
    },
    [types_1.OdataVersion.v4]: {
        [types_1.TemplateType.ListReportObjectPage]: {
            baseComponent: appComponentLibFioriElements,
            ui5Libs: commonUi5Libs[types_1.OdataVersion.v4]
        },
        [types_1.TemplateType.FormEntryObjectPage]: {
            baseComponent: appComponentLibFioriElements,
            ui5Libs: commonUi5Libs[types_1.OdataVersion.v4]
        },
        [types_1.TemplateType.AnalyticalListPage]: {
            baseComponent: appComponentLibFioriElements,
            ui5Libs: commonUi5Libs[types_1.OdataVersion.v4]
        },
        [types_1.TemplateType.Worklist]: {
            baseComponent: appComponentLibFioriElements,
            ui5Libs: commonUi5Libs[types_1.OdataVersion.v4]
        },
        [types_1.TemplateType.OverviewPage]: {
            baseComponent: appComponentLibOVP,
            ui5Libs: [...commonUi5Libs[types_1.OdataVersion.v4], 'sap.ovp', 'sap.ui.rta', 'sap.ui.layout']
        }
    }
};
/**
 * Gets the base UI5 component path that supports the specified template.
 *
 * @param type - The template type of the required base component
 * @param version - The odata service version determines the appropriate base component to use
 * @returns The base component library path
 */
function getBaseComponent(type, version) {
    var _a;
    return (_a = templateLibs[version][type]) === null || _a === void 0 ? void 0 : _a.baseComponent;
}
exports.getBaseComponent = getBaseComponent;
/**
 * Gets the required UI5 libs for the specified template type and OData version.
 *
 * @param type - The template type of the required base component
 * @param version - The odata service version determines the appropriate base component to use
 * @returns The Ui5 libs required by the specified template type and OData version
 */
function getUi5Libs(type, version) {
    var _a;
    return (_a = templateLibs[version][type]) === null || _a === void 0 ? void 0 : _a.ui5Libs;
}
exports.getUi5Libs = getUi5Libs;
exports.TemplateTypeAttributes = {
    [types_1.TemplateType.Worklist]: {
        supportedODataVersions: [types_1.OdataVersion.v2, types_1.OdataVersion.v4],
        minimumUi5Version: {
            [types_1.OdataVersion.v2]: exports.oldestSupportedUI5Version,
            [types_1.OdataVersion.v4]: '1.99.0'
        }
    },
    [types_1.TemplateType.ListReportObjectPage]: {
        supportedODataVersions: [types_1.OdataVersion.v2, types_1.OdataVersion.v4],
        minimumUi5Version: {
            [types_1.OdataVersion.v2]: exports.oldestSupportedUI5Version,
            [types_1.OdataVersion.v4]: '1.84.0'
        }
    },
    [types_1.TemplateType.AnalyticalListPage]: {
        supportedODataVersions: [types_1.OdataVersion.v2, types_1.OdataVersion.v4],
        minimumUi5Version: {
            [types_1.OdataVersion.v2]: exports.oldestSupportedUI5Version,
            [types_1.OdataVersion.v4]: '1.90.0'
        }
    },
    [types_1.TemplateType.OverviewPage]: {
        supportedODataVersions: [types_1.OdataVersion.v2, types_1.OdataVersion.v4],
        minimumUi5Version: {
            [types_1.OdataVersion.v2]: exports.oldestSupportedUI5Version,
            [types_1.OdataVersion.v4]: '1.96.8'
        }
    },
    [types_1.TemplateType.FormEntryObjectPage]: {
        supportedODataVersions: [types_1.OdataVersion.v4],
        minimumUi5Version: {
            [types_1.OdataVersion.v4]: '1.90.0'
        }
    }
};
//# sourceMappingURL=templateAttributes.js.map