"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const artifact_management_base_1 = require("@sap/artifact-management-base");
const events_1 = require("events");
class ItemWatcher extends events_1.EventEmitter {
    constructor(project, watchManager, filter) {
        super();
        this.project = project;
        this.watchManager = watchManager;
        this.filter = filter;
        this.watchManager.on('change', async (events, files) => {
            for (let i = 0; i < events.length; i++) {
                artifact_management_base_1.getLogger().info(`ItemWatch emiting updated event. Event Type: ${events[i]} - File - ${files[i]}`);
            }
            this.emit('updated', events, files);
        });
    }
    async destroy() {
        this.emit('destroy', this);
        this.removeAllListeners('updated');
    }
    async readItems() {
        return this.project.readItems(this.filter);
    }
}
exports.default = ItemWatcher;
//# sourceMappingURL=ItemWatcher.js.map