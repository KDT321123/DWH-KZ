const fs = require('fs');

let myArgs = process.argv.slice(2);
let newVersion = myArgs[0];
console.log("New version: " + newVersion);

// Set version in package.json
let jsonPath = __dirname + '/../package.json';
let jsonString = fs.readFileSync(jsonPath);
let jsonObj = JSON.parse(jsonString);
jsonObj.version = newVersion;

jsonString = JSON.stringify(jsonObj, null, 2);
fs.writeFileSync(jsonPath, jsonString);

// Set version in version.json
jsonPath = __dirname + '/../src/version.json';
jsonString = fs.readFileSync(jsonPath);
jsonObj = JSON.parse(jsonString);
jsonObj.version = newVersion

jsonString = JSON.stringify(jsonObj, null, 2);
fs.writeFileSync(jsonPath, jsonString);
